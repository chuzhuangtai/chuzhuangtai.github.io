<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Yang.Xu</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2018-03-06T13:44:33.624Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Yang.Xu</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Canvas动画</title>
    <link href="http://yoursite.com/2018/03/06/Canvas%E5%8A%A8%E7%94%BB/"/>
    <id>http://yoursite.com/2018/03/06/Canvas动画/</id>
    <published>2018-03-06T13:37:05.000Z</published>
    <updated>2018-03-06T13:44:33.624Z</updated>
    
    <content type="html"><![CDATA[<h2 id="动画与变形"><a href="#动画与变形" class="headerlink" title="动画与变形"></a>动画与变形</h2><h3 id="动画原理"><a href="#动画原理" class="headerlink" title="动画原理"></a>动画原理</h3><ol><li>动画的原理，就是一张张画面连续快速播放，当速度超过每秒24张时，人的肉眼就不会分辨出卡顿感。而觉得是在播放连续的视频动画</li><li>所以， 我们要实现动画，只需要隔十几毫秒把屏幕清空之后，重新绘制下一帧就可以了</li></ol><h3 id="执行动画方案"><a href="#执行动画方案" class="headerlink" title="执行动画方案"></a>执行动画方案</h3><ol><li>我们可以用window.setInterval(), window.setTimeout(),和window.requestAnimationFrame()来设定定期执行一个指定函数。</li><li>setInterval(function, delay): 当设定好间隔时间后，function会定期执行。</li><li>setTimeout(function, delay): 在设定好的时间之后执行函数</li><li>requestAnimationFrame(callback): 递归调用的形式才实现动画，动画的频率跟随浏览器的刷新频率，效率比较高，连续动画都使用这种方式就可以了</li></ol><h3 id="弹球动画讲解"><a href="#弹球动画讲解" class="headerlink" title="弹球动画讲解"></a>弹球动画讲解</h3><ol><li><p>先实现绘制某一帧的方法(draw())</p><ol><li>清空canvas</li><li>绘制小球</li><li>更改小球的位置</li></ol></li><li><p>添加一个动画(window.requesAnimationFrame(draw))</p></li><li><p>边界处理</p><ul><li>如果小球到达边界，修改其速度为反方向；</li></ul></li><li><p>代码实现</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>);</span><br><span class="line">    <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">    ctx.fillStyle = <span class="string">"blue"</span>;</span><br><span class="line">    <span class="keyword">var</span> animation;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建一个圆对象</span></span><br><span class="line">    <span class="keyword">var</span> circle = &#123;</span><br><span class="line">        radias: <span class="number">30</span>,</span><br><span class="line">        x: <span class="number">0</span>,</span><br><span class="line">        y: <span class="number">0</span>,</span><br><span class="line">        speedx: <span class="number">2</span>,</span><br><span class="line">        speedy: <span class="number">1</span>,</span><br><span class="line">        isRunning: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">        draw: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="comment">//画一个圆</span></span><br><span class="line">            ctx.beginPath();</span><br><span class="line">            ctx.arc(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y, <span class="keyword">this</span>.radias, <span class="number">0</span>, <span class="number">2</span>*<span class="built_in">Math</span>.PI);</span><br><span class="line">            ctx.fill();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//每一帧，圆的位置都会发生变化</span></span><br><span class="line">        circle.x += circle.speedx;</span><br><span class="line">        circle.y += circle.speedy;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//边界判断，到了边界就调头</span></span><br><span class="line">        <span class="keyword">if</span> (circle.x == canvas.width-circle.radias || circle.x == circle.radias) &#123;</span><br><span class="line">            circle.speedx = -circle.speedx;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (circle.y == canvas.height-circle.radias || circle.y == circle.radias) &#123;</span><br><span class="line">            circle.speedy = -circle.speedy;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//绘制小球，绘制当前帧，把上一帧的画面清空</span></span><br><span class="line">        <span class="comment">//ctx.clearRect(0, 0, canvas.width, canvas.height);</span></span><br><span class="line">        ctx.save();</span><br><span class="line">        ctx.fillStyle = <span class="string">"rgba(255,255,255,0.2)"</span>;</span><br><span class="line">        <span class="comment">//ctx.fillStyle = "red";</span></span><br><span class="line">        ctx.fillRect(<span class="number">0</span>,<span class="number">0</span>,canvas.width,canvas.height);</span><br><span class="line">        ctx.restore();</span><br><span class="line">        circle.draw();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//开始执行动画</span></span><br><span class="line">        animation = <span class="built_in">window</span>.requestAnimationFrame(draw);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//添加点击事件，当点击时，如果正在运行，则暂停，如果没有正在运行，则点击动行</span></span><br><span class="line">    canvas.addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!circle.isRunning) &#123;</span><br><span class="line">            circle.x = e.clientX;</span><br><span class="line">            circle.y = e.clientY;</span><br><span class="line">            animation = <span class="built_in">window</span>.requestAnimationFrame(draw);</span><br><span class="line">            circle.isRunning = <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            circle.isRunning = <span class="literal">false</span>;</span><br><span class="line">            <span class="built_in">window</span>.cancelAnimationFrame(animation);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="变形"><a href="#变形" class="headerlink" title="变形"></a>变形</h3><h4 id="缩放"><a href="#缩放" class="headerlink" title="缩放"></a>缩放</h4><ol><li><p>scale是用来缩放画布元素的坐标和宽高。如果一张（100*100）的画布，scale为（0.5, 0.5），用fillRect(50, 50, 50, 50)来画一个正方形，实际显示效果未缩放前的（25, 25, 25, 25）位置和大小的效果是一样的。</p></li><li><p>代码与示例</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>);</span><br><span class="line">    <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置画笔的粗细和颜色</span></span><br><span class="line">    ctx.lineWidth = <span class="number">1</span>;</span><br><span class="line">    ctx.strokeStyle = <span class="string">"red"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1. 将画笔移动到某个点</span></span><br><span class="line">    ctx.moveTo(<span class="number">0</span>, <span class="number">200</span>);</span><br><span class="line">    <span class="comment">//2. 从上面这个点开始，划一条直接到某一个点</span></span><br><span class="line">    ctx.lineTo(<span class="number">600</span>, <span class="number">200</span>);</span><br><span class="line"></span><br><span class="line">    ctx.moveTo(<span class="number">300</span>, <span class="number">0</span>);</span><br><span class="line">    ctx.lineTo(<span class="number">300</span>, <span class="number">400</span>);</span><br><span class="line">    <span class="comment">//3. 填充颜色</span></span><br><span class="line">    ctx.stroke();</span><br><span class="line"></span><br><span class="line">    ctx.fillRect(<span class="number">300</span>, <span class="number">200</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">    ctx.scale(<span class="number">0.5</span>, <span class="number">0.5</span>);</span><br><span class="line">    ctx.fillRect(<span class="number">300</span>, <span class="number">200</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h4 id="平移"><a href="#平移" class="headerlink" title="平移"></a>平移</h4><ol><li><p>平移就是改变往水平或垂直方向，改变参考原点的值。translate(100, 100);就是绘图时，在当前参考原点的基本之上，向右平移100像素，向下平移100像素。</p></li><li><p>代码与示例</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>);</span><br><span class="line">    <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置画笔的粗细和颜色</span></span><br><span class="line">    ctx.lineWidth = <span class="number">1</span>;</span><br><span class="line">    ctx.strokeStyle = <span class="string">"red"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1. 将画笔移动到某个点</span></span><br><span class="line">    ctx.moveTo(<span class="number">0</span>, <span class="number">200</span>);</span><br><span class="line">    <span class="comment">//2. 从上面这个点开始，划一条直接到某一个点</span></span><br><span class="line">    ctx.lineTo(<span class="number">600</span>, <span class="number">200</span>);</span><br><span class="line"></span><br><span class="line">    ctx.moveTo(<span class="number">300</span>, <span class="number">0</span>);</span><br><span class="line">    ctx.lineTo(<span class="number">300</span>, <span class="number">400</span>);</span><br><span class="line">    <span class="comment">//3. 填充颜色</span></span><br><span class="line">    ctx.stroke();</span><br><span class="line"></span><br><span class="line">    ctx.fillRect(<span class="number">300</span>, <span class="number">200</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">    ctx.translate(<span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">    ctx.fillRect(<span class="number">300</span>, <span class="number">200</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h4 id="旋转"><a href="#旋转" class="headerlink" title="旋转"></a>旋转</h4><ol><li><p>旋转，就是围绕当前的原点，坐标系发生旋转。</p></li><li><p>代码与示例</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>);</span><br><span class="line">    <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line"></span><br><span class="line">    ctx.save();</span><br><span class="line">    ctx.translate(<span class="number">200</span>, <span class="number">200</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//画30条直线，角度不一样</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="number">30</span>; i++) &#123;</span><br><span class="line">        ctx.rotate(<span class="number">1</span>/<span class="number">15</span>*<span class="built_in">Math</span>.PI);</span><br><span class="line">        ctx.beginPath();</span><br><span class="line">        ctx.moveTo(<span class="number">30</span>, <span class="number">0</span>);</span><br><span class="line">        ctx.lineTo(<span class="number">150</span>, <span class="number">0</span>);</span><br><span class="line">        ctx.stroke();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ctx.restore();</span><br><span class="line"></span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><p>​</p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;动画与变形&quot;&gt;&lt;a href=&quot;#动画与变形&quot; class=&quot;headerlink&quot; title=&quot;动画与变形&quot;&gt;&lt;/a&gt;动画与变形&lt;/h2&gt;&lt;h3 id=&quot;动画原理&quot;&gt;&lt;a href=&quot;#动画原理&quot; class=&quot;headerlink&quot; title=&quot;动画原理&quot;
      
    
    </summary>
    
      <category term="前端" scheme="http://yoursite.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="canvas" scheme="http://yoursite.com/tags/canvas/"/>
    
  </entry>
  
  <entry>
    <title>DOM元素获取</title>
    <link href="http://yoursite.com/2018/03/06/DOM%E5%85%83%E7%B4%A0%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%E6%93%8D%E4%BD%9C/"/>
    <id>http://yoursite.com/2018/03/06/DOM元素的增删改查操作/</id>
    <published>2018-03-06T13:37:05.000Z</published>
    <updated>2018-03-08T03:48:47.685Z</updated>
    
    <content type="html"><![CDATA[<h6 id="获得页面元素的方式"><a href="#获得页面元素的方式" class="headerlink" title="获得页面元素的方式"></a>获得页面元素的方式</h6><ol><li>document.getElementById();     //方法可返回对拥有指定 ID 的第一个对象的引用</li><li>document.getElementsByTagName();    //返回带有指定标签名的对象集合。</li><li>document.getElementsByClassName();    //方法返回文档中所有指定类名的元素集合</li><li>querySelector();     //方法仅仅返回匹配指定选择器的第一个元素。如需返回所有的元素，请使用 querySelectorAll() 方法替代。</li><li>querySelectorAll()；  // 是HTML5中引入的新方法，返回文档中匹配的CSS选择器的所有元素节点列表</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h6 id=&quot;获得页面元素的方式&quot;&gt;&lt;a href=&quot;#获得页面元素的方式&quot; class=&quot;headerlink&quot; title=&quot;获得页面元素的方式&quot;&gt;&lt;/a&gt;获得页面元素的方式&lt;/h6&gt;&lt;ol&gt;
&lt;li&gt;document.getElementById();     //方法可
      
    
    </summary>
    
      <category term="前端" scheme="http://yoursite.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="DOM" scheme="http://yoursite.com/tags/DOM/"/>
    
  </entry>
  
  <entry>
    <title>响应式viewport设计</title>
    <link href="http://yoursite.com/2018/01/14/viewport/"/>
    <id>http://yoursite.com/2018/01/14/viewport/</id>
    <published>2018-01-14T02:29:12.000Z</published>
    <updated>2018-03-08T13:22:02.279Z</updated>
    
    <content type="html"><![CDATA[<h2 id="响应式viewport设计"><a href="#响应式viewport设计" class="headerlink" title="响应式viewport设计"></a>响应式viewport设计</h2><h3 id="什么是-Viewport"><a href="#什么是-Viewport" class="headerlink" title="什么是 Viewport?"></a>什么是 Viewport?</h3><p>viewport 是用户网页的可视区域。</p><ul><li>viewport 翻译为中文可以叫做”视区”。</li></ul><blockquote><p> 在移动设备里面， 屏幕可以把它相像成一个窗户。 网页是在窗户的后面一个叫做 视区（viewport）的区域显示的。 就相当于在窗记的后面有一块可以滑动的幕布。 一般情况下， viewport的宽度，会比手机的实际的宽度要大。</p></blockquote><pre><code>   viewport的背景： 在智能手机才出来的时候，所有的pc端的网页，要想在手机上完整显示， 必须只能左右滑动。 这样的话只能让手机的可视区。比手机屏幕的宽度要大。      就产生了一个问题： 在布局的时候，如果使用百分比布局，参考的屏幕的宽度可能是一个错误的值。    强制去设置视口的宽度和屏幕的宽度一致。    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</code></pre><h3 id="viewport的属性的介绍"><a href="#viewport的属性的介绍" class="headerlink" title="viewport的属性的介绍"></a>viewport的属性的介绍</h3><ul><li>height：和 width 相对应，指定高度。</li><li>initial-scale：初始缩放比例，也即是当页面第一次 load 的时候缩放比例。</li><li>maximum-scale：允许用户缩放到的最大比例。</li><li>minimum-scale：允许用户缩放到的最小比例。</li><li>user-scalable：用户是否可以手动缩放。</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;响应式viewport设计&quot;&gt;&lt;a href=&quot;#响应式viewport设计&quot; class=&quot;headerlink&quot; title=&quot;响应式viewport设计&quot;&gt;&lt;/a&gt;响应式viewport设计&lt;/h2&gt;&lt;h3 id=&quot;什么是-Viewport&quot;&gt;&lt;a href
      
    
    </summary>
    
      <category term="web移动端" scheme="http://yoursite.com/categories/web%E7%A7%BB%E5%8A%A8%E7%AB%AF/"/>
    
    
      <category term="viewport设计" scheme="http://yoursite.com/tags/viewport%E8%AE%BE%E8%AE%A1/"/>
    
  </entry>
  
  <entry>
    <title>PHP数据库简单操作</title>
    <link href="http://yoursite.com/2017/09/21/PHP%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    <id>http://yoursite.com/2017/09/21/PHP数据库/</id>
    <published>2017-09-21T09:25:18.000Z</published>
    <updated>2018-03-08T13:13:27.659Z</updated>
    
    <content type="html"><![CDATA[<h2 id="数据库操作方式"><a href="#数据库操作方式" class="headerlink" title="数据库操作方式"></a>数据库操作方式</h2><ul><li>图形界面客户端<ul><li>创建连接</li><li>创建数据库</li><li>删除数据库</li><li>创建表</li><li>编辑表</li><li>删除表</li><li>表结构分析</li><li>数据类型分析</li><li>数据增删改查操作</li></ul></li></ul><h2 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h2><ul><li>SQL基本概述</li><li><p>插入数据insert</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- insert into 表名 (字段列表) values (值列表)</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> book (<span class="keyword">name</span>,author,<span class="keyword">category</span>,price) <span class="keyword">values</span> (<span class="string">'天龙八部'</span>,<span class="string">'金庸'</span>,<span class="string">'文学'</span>,<span class="number">20</span>)</span><br></pre></td></tr></table></figure></li><li><p>修改数据update</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- update 表名 set 字段名称1=值1,字段名称2=值2,... where 条件</span></span><br><span class="line"><span class="keyword">update</span> book <span class="keyword">set</span> <span class="keyword">name</span>=<span class="string">'笑傲江湖'</span>,price=<span class="string">'30'</span> <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">10</span></span><br></pre></td></tr></table></figure></li><li><p>删除数据delete</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- delete from 表名 where 条件</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> book <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">10</span></span><br></pre></td></tr></table></figure></li><li><p>查询数据select</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- select * from 表名 where 条件</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> book <span class="keyword">where</span> author=<span class="string">'金庸'</span> <span class="keyword">and</span> price&gt;<span class="number">20</span></span><br></pre></td></tr></table></figure></li><li><p>简单的联表查询</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> u.username,b.name <span class="keyword">from</span> <span class="keyword">user</span> u,book b <span class="keyword">where</span> u.id=b.uid <span class="keyword">and</span> b.price&gt;<span class="number">20</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="PHP代码操作数据"><a href="#PHP代码操作数据" class="headerlink" title="PHP代码操作数据"></a>PHP代码操作数据</h2><ul><li><p>连接数据库基本步骤</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1、连接数据库</span></span><br><span class="line">$server = <span class="string">'localhost'</span>;<span class="comment">//数据库所在计算机的域名或者IP地址</span></span><br><span class="line">$username = <span class="string">'root'</span>;<span class="comment">//登录数据库的用户名</span></span><br><span class="line">$pw = <span class="string">''</span>;<span class="comment">//登录数据库的密码</span></span><br><span class="line"><span class="comment">// 执行连接操作</span></span><br><span class="line">$link = mysql_connect($server,$username,$pw);</span><br><span class="line"><span class="comment">// 2、选择要操作哪个数据库</span></span><br><span class="line">mysql_select_db(<span class="string">'hello'</span>,$link);</span><br><span class="line"><span class="comment">// 3、设置查询编码</span></span><br><span class="line">mysql_query(<span class="string">"SET names UTF8"</span>);</span><br><span class="line"><span class="comment">// 4、操作数据（通过sql语句操作数据库）</span></span><br><span class="line">$str = <span class="string">'select count(*) as cc from user'</span>;</span><br><span class="line">$result = mysql_query($str);</span><br><span class="line"><span class="comment">// 5、获取数据库的结果集并解析</span></span><br><span class="line">$row = mysql_fetch_assoc($result);</span><br><span class="line"><span class="keyword">echo</span> $row[<span class="string">'cc'</span>];</span><br><span class="line"><span class="comment">// 6、释放资源并关闭数据库</span></span><br><span class="line">mysql_free_result($result);</span><br><span class="line">mysql_close($link);</span><br></pre></td></tr></table></figure></li><li><p>数据库操作常用api</p><ul><li>mysql_connect() 连接数据库</li><li>mysql_select_db() 选择数据库</li><li>mysql_query() 执SQL语句</li><li>mysql_fetch_row() 以索引数组的形式返回结果</li><li>mysql_fetch_assoc() 以关联数组的形式范湖数据</li><li>mysql_fetch_array() 返回索引数组和关联数组</li><li>mysql_fetch_object() 以对象形式返回结果</li><li>mysql_free_result() 释放资源</li><li>mysql_close() 关闭连接</li></ul></li><li>基本增删改查操作</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;数据库操作方式&quot;&gt;&lt;a href=&quot;#数据库操作方式&quot; class=&quot;headerlink&quot; title=&quot;数据库操作方式&quot;&gt;&lt;/a&gt;数据库操作方式&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;图形界面客户端&lt;ul&gt;
&lt;li&gt;创建连接&lt;/li&gt;
&lt;li&gt;创建数据库&lt;/li&gt;
&lt;li
      
    
    </summary>
    
      <category term="PHP" scheme="http://yoursite.com/categories/PHP/"/>
    
    
      <category term="PHP-数据库" scheme="http://yoursite.com/tags/PHP-%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>jQuery操作</title>
    <link href="http://yoursite.com/2017/09/21/jQuery_Class%E6%93%8D%E4%BD%9C/"/>
    <id>http://yoursite.com/2017/09/21/jQuery_Class操作/</id>
    <published>2017-09-21T09:25:18.000Z</published>
    <updated>2018-03-09T13:16:39.351Z</updated>
    
    <content type="html"><![CDATA[<h2 id="jQuery操作"><a href="#jQuery操作" class="headerlink" title="jQuery操作"></a>jQuery操作</h2><h3 id="CSS操作"><a href="#CSS操作" class="headerlink" title="CSS操作"></a>CSS操作</h3><ul><li><p>功能：设置或者修改样式，操作的是style属性。</p></li><li><p>操作单个样式</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// name：需要设置的样式名称</span></span><br><span class="line"><span class="comment">// value：对应的样式值</span></span><br><span class="line">$obj.css(name, value);</span><br><span class="line"><span class="comment">// 使用案例</span></span><br><span class="line">$(<span class="string">'#one'</span>).css(<span class="string">'background'</span>,<span class="string">'gray'</span>);<span class="comment">// 将背景色修改为灰色</span></span><br></pre></td></tr></table></figure><ul><li>设置多个样式</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 参数是一个对象，对象中包含了需要设置的样式名和样式值</span></span><br><span class="line">$obj.css(obj);</span><br><span class="line"><span class="comment">// 使用案例</span></span><br><span class="line">$(<span class="string">'#one'</span>).css(&#123;</span><br><span class="line">    <span class="string">'background'</span>:<span class="string">'gray'</span>,</span><br><span class="line">    <span class="string">'width'</span>:<span class="string">'400px'</span>,</span><br><span class="line">    <span class="string">'height'</span>:<span class="string">'200px'</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>获取样式</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// name:需要获取的样式名称</span></span><br><span class="line">$obj.css(name);</span><br><span class="line"><span class="comment">// 案例</span></span><br><span class="line">$(<span class="string">'div'</span>).css(<span class="string">'background-color'</span>);</span><br></pre></td></tr></table></figure><p>注意：获取样式操作只会返回第一个元素对应的样式值。</p><p>隐式迭代：</p><ol><li>设置操作的时候，如果是多个元素，那么给所有的元素设置相同的值</li><li>获取操作的时候，如果是多个元素，那么只会返回第一个元素的值。</li></ol><h3 id="class操作"><a href="#class操作" class="headerlink" title="class操作"></a>class操作</h3><ul><li>添加样式类</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// name：需要添加的样式类名，注意参数不要带点.</span></span><br><span class="line">$obj.addClass(name);</span><br><span class="line"><span class="comment">// 例子,给所有的div添加one的样式。</span></span><br><span class="line">$(<span class="string">'div'</span>).addClass(<span class="string">'one'</span>);</span><br></pre></td></tr></table></figure><ul><li>移除样式类</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// name:需要移除的样式类名</span></span><br><span class="line">$obj.removeClass(<span class="string">'name'</span>);</span><br><span class="line"><span class="comment">// 例子，移除div中one的样式类名</span></span><br><span class="line">$(<span class="string">'div'</span>).removeClass(<span class="string">'one'</span>);</span><br></pre></td></tr></table></figure><ul><li>判断是否有某个样式类</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// name:用于判断的样式类名，返回值为true false</span></span><br><span class="line">$obj.hasClass(name)</span><br><span class="line"><span class="comment">// 例子，判断第一个div是否有one的样式类</span></span><br><span class="line">$(<span class="string">'div'</span>).hasClass(<span class="string">'one'</span>);</span><br></pre></td></tr></table></figure><ul><li>切换样式类</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// name:需要切换的样式类名，如果有，移除该样式，如果没有，添加该样式。</span></span><br><span class="line">$obj.toggleClass(name);</span><br><span class="line"><span class="comment">// 例子</span></span><br><span class="line">$(<span class="string">'div'</span>).toggleClass(<span class="string">'one'</span>);</span><br></pre></td></tr></table></figure><h2 id="jQuery节点操作"><a href="#jQuery节点操作" class="headerlink" title="jQuery节点操作"></a>jQuery节点操作</h2><h3 id="创建节点"><a href="#创建节点" class="headerlink" title="创建节点"></a>创建节点</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// $(htmlStr)</span></span><br><span class="line"><span class="comment">// htmlStr：html格式的字符串</span></span><br><span class="line">$(<span class="string">'&lt;span-这是一个span元素&lt;/span-'</span>);</span><br></pre></td></tr></table></figure><h3 id="添加节点"><a href="#添加节点" class="headerlink" title="添加节点"></a>添加节点</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">append  appendTo在被选元素的结尾插入内容</span><br><span class="line">prepend prependTo在被选元素的开头插入内容</span><br><span class="line">before在被选元素之后插入内容</span><br><span class="line">after在被选元素之前插入内容</span><br></pre></td></tr></table></figure><h3 id="清空节点与删除节点"><a href="#清空节点与删除节点" class="headerlink" title="清空节点与删除节点"></a>清空节点与删除节点</h3><ul><li>empty：清空指定节点的所有元素，自身保留(清理门户)</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'div'</span>).empty(); <span class="comment">// 清空div的所有内容（推荐使用，会清除子元素上绑定的内容，源码）</span></span><br><span class="line">$(<span class="string">'div'</span>).html(<span class="string">''</span>);<span class="comment">// 使用html方法来清空元素，不推荐使用，会造成内存泄漏，绑定的事件不会被清除。</span></span><br></pre></td></tr></table></figure><ul><li>remove：相比于empty，自身也删除（自杀）</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'div'</span>).remove();</span><br></pre></td></tr></table></figure><h3 id="克隆节点"><a href="#克隆节点" class="headerlink" title="克隆节点"></a>克隆节点</h3><ul><li>作用：复制匹配的元素</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 复制$(selector)所匹配到的元素（深度复制）</span></span><br><span class="line"><span class="comment">// cloneNode(true)</span></span><br><span class="line"><span class="comment">// 返回值为复制的新元素，和原来的元素没有任何关系了。即修改新元素，不会影响到原来的元素。</span></span><br><span class="line">$(selector).clone();</span><br></pre></td></tr></table></figure><h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><ul><li>城市选择 [11-城市选择案例.html]</li><li>删除表格 [12 表格删除案例.html]</li><li>根据数据生成表格 [13-表格生成案例.html]</li><li>添加和删除表格数据 [14-动态数据添加和删除.html]</li></ul><h2 id="jQuery操作属性"><a href="#jQuery操作属性" class="headerlink" title="jQuery操作属性"></a>jQuery操作属性</h2><h3 id="attr操作"><a href="#attr操作" class="headerlink" title="attr操作"></a>attr操作</h3><ul><li>设置单个属性</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第一个参数：需要设置的属性名</span></span><br><span class="line"><span class="comment">// 第二个参数：对应的属性值</span></span><br><span class="line">$obj.attr(name, value);</span><br><span class="line"><span class="comment">// 用法举例</span></span><br><span class="line">$(<span class="string">'img'</span>).attr(<span class="string">'title'</span>,<span class="string">'哎哟，不错哦'</span>);</span><br><span class="line">$(<span class="string">'img'</span>).attr(<span class="string">'alt'</span>,<span class="string">'哎哟，不错哦'</span>);</span><br></pre></td></tr></table></figure><ul><li>设置多个属性</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 参数是一个对象，包含了需要设置的属性名和属性值</span></span><br><span class="line">$obj.attr(obj)</span><br><span class="line"><span class="comment">// 用法举例</span></span><br><span class="line">$(<span class="string">'img'</span>).attr(&#123;</span><br><span class="line">    title:<span class="string">'哎哟，不错哦'</span>,</span><br><span class="line">    alt:<span class="string">'哎哟，不错哦'</span>,</span><br><span class="line">    style:<span class="string">'opacity:.5'</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>获取属性</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 传需要获取的属性名称，返回对应的属性值</span></span><br><span class="line">$obj.attr(name)</span><br><span class="line"><span class="comment">// 用法举例</span></span><br><span class="line"><span class="keyword">var</span> oTitle = $(<span class="string">'img'</span>).attr(<span class="string">'title'</span>);</span><br><span class="line">alert(oTitle);</span><br></pre></td></tr></table></figure><ul><li>移除属性</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 参数：需要移除的属性名，</span></span><br><span class="line">$obj.removeAttr(name);</span><br><span class="line"><span class="comment">// 用法举例</span></span><br><span class="line">$(<span class="string">'img'</span>).removeAttr(<span class="string">'title'</span>);</span><br></pre></td></tr></table></figure><h3 id="prop操作"><a href="#prop操作" class="headerlink" title="prop操作"></a>prop操作</h3><ul><li>在jQuery1.6之后，对于checked、selected、disabled这类boolean类型的属性来说，不能用attr方法，只能用prop方法。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置属性</span></span><br><span class="line">$(<span class="string">':checked'</span>).prop(<span class="string">'checked'</span>,<span class="literal">true</span>);</span><br><span class="line"><span class="comment">// 获取属性</span></span><br><span class="line">$(<span class="string">':checked'</span>).prop(<span class="string">'checked'</span>);<span class="comment">// 返回true或者false</span></span><br></pre></td></tr></table></figure><h3 id="val-text-html"><a href="#val-text-html" class="headerlink" title="val()/text/()html()"></a>val()/text/()html()</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$obj.val()获取或者设置表单元素的value属性的值</span><br><span class="line">$obj.html() 对应innerHTML</span><br><span class="line">$obj.text()对应innerText/textContent，处理了浏览器的兼容性</span><br></pre></td></tr></table></figure><h3 id="案例-1"><a href="#案例-1" class="headerlink" title="案例"></a>案例</h3><ul><li>表格全选反选 [15-表格全选反选.html]</li><li>打字效果 [16-打字效果.html]</li></ul><h2 id="jQuery尺寸和位置操作"><a href="#jQuery尺寸和位置操作" class="headerlink" title="jQuery尺寸和位置操作"></a>jQuery尺寸和位置操作</h2><h3 id="width方法与height方法"><a href="#width方法与height方法" class="headerlink" title="width方法与height方法"></a>width方法与height方法</h3><ul><li>设置或者获取高度，不包括内边距、边框和外边距</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 带参数表示设置高度</span></span><br><span class="line">$(<span class="string">'img'</span>).height(<span class="number">200</span>);</span><br><span class="line"><span class="comment">// 不带参数获取高度</span></span><br><span class="line">$(<span class="string">'img'</span>).height();</span><br></pre></td></tr></table></figure><p>获取网页的可视区宽高</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取可视区宽度</span></span><br><span class="line">$(<span class="built_in">window</span>).width();</span><br><span class="line"><span class="comment">// 获取可视区高度</span></span><br><span class="line">$(<span class="built_in">window</span>).height();</span><br></pre></td></tr></table></figure><h3 id="innerWidth-innerHeight-outerWidth-outerHeight"><a href="#innerWidth-innerHeight-outerWidth-outerHeight" class="headerlink" title="innerWidth/innerHeight/outerWidth/outerHeight"></a>innerWidth/innerHeight/outerWidth/outerHeight</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">innerWidth()/innerHeight()方法返回元素的宽度/高度（包括内边距）。</span><br><span class="line">outerWidth()/outerHeight()  方法返回元素的宽度/高度（包括内边距和边框）。</span><br><span class="line">outerWidth(<span class="literal">true</span>)/outerHeight(<span class="literal">true</span>)  方法返回元素的宽度/高度（包括内边距、边框和外边距）。</span><br></pre></td></tr></table></figure><h3 id="scrollTop与scrollLeft"><a href="#scrollTop与scrollLeft" class="headerlink" title="scrollTop与scrollLeft"></a>scrollTop与scrollLeft</h3><ul><li>设置或者获取垂直滚动条的位置</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取页面被卷曲的高度</span></span><br><span class="line">$(<span class="built_in">window</span>).scrollTop();</span><br><span class="line"><span class="comment">// 获取页面被卷曲的宽度</span></span><br><span class="line">$(<span class="built_in">window</span>).scrollLeft();</span><br></pre></td></tr></table></figure><h3 id="offset方法与position方法"><a href="#offset方法与position方法" class="headerlink" title="offset方法与position方法"></a>offset方法与position方法</h3><ul><li>offset方法获取元素距离document的位置，position方法获取的是元素距离有定位的父元素(offsetParent)的位置。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取元素距离document的位置,返回值为对象：&#123;left:100, top:100&#125;</span></span><br><span class="line">$(selector).offset();</span><br><span class="line"><span class="comment">// 获取相对于其最近的有定位的父元素的位置。</span></span><br><span class="line">$(selector).position();</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;jQuery操作&quot;&gt;&lt;a href=&quot;#jQuery操作&quot; class=&quot;headerlink&quot; title=&quot;jQuery操作&quot;&gt;&lt;/a&gt;jQuery操作&lt;/h2&gt;&lt;h3 id=&quot;CSS操作&quot;&gt;&lt;a href=&quot;#CSS操作&quot; class=&quot;headerlink
      
    
    </summary>
    
      <category term="jQuery" scheme="http://yoursite.com/categories/jQuery/"/>
    
    
      <category term="jQuery操作元素" scheme="http://yoursite.com/tags/jQuery%E6%93%8D%E4%BD%9C%E5%85%83%E7%B4%A0/"/>
    
  </entry>
  
  <entry>
    <title>js贪吃蛇</title>
    <link href="http://yoursite.com/2017/05/28/%E7%AE%80%E6%98%93%E8%B4%AA%E5%90%83%E8%9B%87/"/>
    <id>http://yoursite.com/2017/05/28/简易贪吃蛇/</id>
    <published>2017-05-28T04:54:05.000Z</published>
    <updated>2018-03-08T03:47:56.294Z</updated>
    
    <content type="html"><![CDATA[<h2 id="简易贪吃蛇"><a href="#简易贪吃蛇" class="headerlink" title="简易贪吃蛇"></a>简易贪吃蛇</h2><h3 id="项目分析"><a href="#项目分析" class="headerlink" title="项目分析"></a>项目分析</h3><ul><li><blockquote><p>原理：我只要找一个对象，当我调用它开始游戏的方法，那么游戏就开始了。但是现在没有这样的对象，所以我们要封装这个对象，相当于是一个游戏管家。</p></blockquote></li></ul><h3 id="确定开发步骤"><a href="#确定开发步骤" class="headerlink" title="确定开发步骤"></a>确定开发步骤</h3><ol><li>写一个div到body里，当地图，设置样式宽和高、背景颜色、相对定位</li><li>创建食物</li><li>创建蛇</li><li>把食物和蛇单独封装到各自的一个文件</li><li>创建一个游戏管家类</li><li>用户按上下左右让蛇跟着动</li><li>判断越界</li><li>判断吃食物</li></ol><h3 id="创建地图模板"><a href="#创建地图模板" class="headerlink" title="创建地图模板"></a>创建地图模板</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head lang=&quot;en&quot;&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        #map &#123;</span><br><span class="line">            width: 600px;</span><br><span class="line">            height: 600px;</span><br><span class="line">            background-color: #cccccc;</span><br><span class="line">            position: relative;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;div id=&quot;map&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src=&quot;food.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;snake.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;Game.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">//找到地图</span><br><span class="line">var map = document.getElementById(&quot;map&quot;);</span><br><span class="line"></span><br><span class="line">//实例化游戏管家对象</span><br><span class="line">var gm = new Game();</span><br><span class="line"></span><br><span class="line">gm.startGame(map);</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="创建食物"><a href="#创建食物" class="headerlink" title="创建食物"></a>创建食物</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">function Food(x, y, w, h, color) &#123;</span><br><span class="line"></span><br><span class="line">    this.x = x || 0;</span><br><span class="line">    this.y = y || 0;</span><br><span class="line">    this.width = w || 20;</span><br><span class="line">    this.height = h || 20;</span><br><span class="line">    this.color = color || &quot;green&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var lastFood;</span><br><span class="line"></span><br><span class="line">//把食物渲染出来</span><br><span class="line">Food.prototype.render = function (map) &#123;</span><br><span class="line"></span><br><span class="line">if (lastFood) &#123;</span><br><span class="line"></span><br><span class="line">    //先把上一次的食物清掉</span><br><span class="line">    map.removeChild(lastFood);</span><br><span class="line">&#125;</span><br><span class="line">    //用地图的宽除以食物的宽得到最大可以放多少列</span><br><span class="line">    var col = map.offsetWidth / this.width;</span><br><span class="line">    this.x = Math.floor((Math.random() * col)) * this.width;</span><br><span class="line">    var row = map.offsetHeight / this.height;</span><br><span class="line">    this.y = Math.floor(Math.random() * row) * this.height;</span><br><span class="line">    </span><br><span class="line">    //创建div</span><br><span class="line">    var div = document.createElement(&quot;div&quot;);</span><br><span class="line">    div.style.position = &quot;absolute&quot;;</span><br><span class="line">    div.style.left = this.x + &quot;px&quot;;</span><br><span class="line">    div.style.top = this.y + &quot;px&quot;;</span><br><span class="line">    div.style.width = this.width + &quot;px&quot;;</span><br><span class="line">    div.style.height = this.height + &quot;px&quot;;</span><br><span class="line">    div.style.backgroundColor = this.color;</span><br><span class="line">    </span><br><span class="line">    lastFood = div;</span><br><span class="line">    </span><br><span class="line">    map.appendChild(div);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="创建蛇对象"><a href="#创建蛇对象" class="headerlink" title="创建蛇对象"></a>创建蛇对象</h3><pre><code>//保存上一次渲染生成的divvar list = [];//因为蛇是对象，所以给它一个构造函数function Snake(bodyW, bodyH, direction) {    //宽和高，只要用一个属性保存    this.bodyW = bodyW || 20;    this.bodyH = bodyH || 20;    //这里可以设置蛇默认的方向    this.direction = direction || &quot;right&quot;;    //蛇有身体，身体由数组组成（因为默认有3节身体，后面吃了食物还要能长身体（相当于给数组加一个元素））    this.body = [        {x: 3, y: 1, color: &quot;red&quot;},        {x: 2, y: 1, color: &quot;seagreen&quot;},        {x: 1, y: 1, color: &quot;seagreen&quot;},    ];}Snake.prototype.render = function (map) {    //先删除上一次渲染出来的div    for (var i = 0; i &lt; list.length; i++) {        map.removeChild(list[i]);    }    //内存中也要把这些div清楚掉    list = [];    //body里有多少个元素，就创建多少个div    for (var i = 0; i &lt; this.body.length; i++) {        var div = document.createElement(&quot;div&quot;);        div.style.position = &quot;absolute&quot;;        div.style.left = this.body[i].x * this.bodyW + &quot;px&quot;;        div.style.top = this.body[i].y * this.bodyH + &quot;px&quot;;        div.style.width = this.bodyW + &quot;px&quot;;        div.style.height = this.bodyH + &quot;px&quot;;        div.style.backgroundColor = this.body[i].color;        //把每次创建的div保存起来        list.push(div);        map.appendChild(div);    }}//移动是蛇的行为，所以给蛇对象加一个移动的方法Snake.prototype.move = function () {    //蛇身体移动，它前一个位置是多少，它就移动到多少    //从后到前遍历会更好，因为这样的话前一个身体还没动过位置可以拿到这个位置    //注意：不要包括0，因为0是蛇头，而蛇头没有前一个身体，是要单独根据方向来定    for (var i = this.body.length - 1; i &gt; 0; i--) {        this.body[i].x = this.body[i - 1].x;        this.body[i].y = this.body[i - 1].y;    }    //蛇头移动根据方向来    switch (this.direction) {        case &quot;up&quot;:            this.body[0].y--;            break;        case &quot;down&quot;:            this.body[0].y++;            break;        case &quot;left&quot;:            this.body[0].x--;            break;        case &quot;right&quot;:            this.body[0].x++;            break;    }}</code></pre><h3 id="创建一个游戏管家类"><a href="#创建一个游戏管家类" class="headerlink" title="创建一个游戏管家类"></a>创建一个游戏管家类</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line">var that;</span><br><span class="line">function Game() &#123;</span><br><span class="line"></span><br><span class="line">    //把游戏管理者对象保存起来，保存在that</span><br><span class="line">    that = this;</span><br><span class="line"></span><br><span class="line">    //管理蛇对象</span><br><span class="line">    this.snake = new Snake();</span><br><span class="line"></span><br><span class="line">    //管理食物对象</span><br><span class="line">    this.food = new Food();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function bindKey() &#123;</span><br><span class="line"></span><br><span class="line">    //document.onkeypress;//不包括功能键</span><br><span class="line"></span><br><span class="line">    document.onkeydown = function (e) &#123;</span><br><span class="line"></span><br><span class="line">        e = e || window.event;</span><br><span class="line"></span><br><span class="line">        var code = e.keyCode || e.charCode || e.which;</span><br><span class="line">        //37左 38上 39右 40下</span><br><span class="line"></span><br><span class="line">        switch (code) &#123;</span><br><span class="line"></span><br><span class="line">            case 37:</span><br><span class="line">                if (that.snake.direction != &quot;right&quot;)</span><br><span class="line">                    that.snake.direction = &quot;left&quot;;</span><br><span class="line">                break;</span><br><span class="line">            case 38:</span><br><span class="line">                if (that.snake.direction != &quot;down&quot;)</span><br><span class="line">                    that.snake.direction = &quot;up&quot;;</span><br><span class="line">                break;</span><br><span class="line"></span><br><span class="line">            case 39:</span><br><span class="line">                if (that.snake.direction != &quot;left&quot;)</span><br><span class="line">                    that.snake.direction = &quot;right&quot;;</span><br><span class="line">                break;</span><br><span class="line"></span><br><span class="line">            case 40:</span><br><span class="line">                if (that.snake.direction != &quot;up&quot;)</span><br><span class="line">                    that.snake.direction = &quot;down&quot;;</span><br><span class="line">                break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//开始游戏</span><br><span class="line">Game.prototype.startGame = function (map) &#123;</span><br><span class="line"></span><br><span class="line">    //开始游戏时就需要监听网页用户按下的键</span><br><span class="line">    bindKey();</span><br><span class="line"></span><br><span class="line">    //要把食物画出来</span><br><span class="line">    this.food.render(map);</span><br><span class="line"></span><br><span class="line">    //把蛇画出来</span><br><span class="line">    this.snake.render(map);</span><br><span class="line"></span><br><span class="line">    //蛇自己自动</span><br><span class="line">    autoMove();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function autoMove() &#123;</span><br><span class="line"></span><br><span class="line">    var timerID = setInterval(function () &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        //保存移动之前最后一格的身体坐标（为了如果移动后吃到食物了，这个坐标就给新添加的身体）</span><br><span class="line">        var oldX = that.snake.body[that.snake.body.length - 1].x;</span><br><span class="line">        var oldY = that.snake.body[that.snake.body.length - 1].y;</span><br><span class="line"></span><br><span class="line">        //让蛇自己动</span><br><span class="line">        that.snake.move();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        //判断是否越界</span><br><span class="line">        //如果水平方向一行只能放20个，意味着蛇头的x如果大于等于20就越界</span><br><span class="line">        var maxCol = map.offsetWidth / that.snake.bodyW;</span><br><span class="line">        var maxRow = map.offsetHeight / that.snake.bodyH;</span><br><span class="line">        var head = that.snake.body[0];</span><br><span class="line">        if (head.x &gt;= maxCol || head.x &lt; 0 || head.y &lt; 0 || head.y &gt;= maxRow) &#123;</span><br><span class="line"></span><br><span class="line">            alert(&quot;Game Over!&quot;);</span><br><span class="line"></span><br><span class="line">            clearInterval(timerID);</span><br><span class="line"></span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        //判断有没有吃到食物：思路：蛇头的坐标如果和食物的坐标重合就代表吃到了</span><br><span class="line">        //先计算出蛇头真正left值</span><br><span class="line">        var x = head.x * that.snake.bodyW;</span><br><span class="line">        //再计算蛇头真正的top值</span><br><span class="line">        var y = head.y * that.snake.bodyH;</span><br><span class="line">        //判断是否迟到食物</span><br><span class="line">        if (x == that.food.x &amp;&amp; y == that.food.y) &#123;</span><br><span class="line"></span><br><span class="line">            //让蛇加一节身体</span><br><span class="line">            that.snake.body.push(</span><br><span class="line">                &#123;x: oldX, y: oldY, color: &quot;seagreen&quot;&#125;</span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line">            //让食物重新生成（渲染）它内部每次渲染之前都清除原来的了</span><br><span class="line">            that.food.render(map);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        //让你根据最新位置渲染</span><br><span class="line">        that.snake.render(map);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;, 180);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;简易贪吃蛇&quot;&gt;&lt;a href=&quot;#简易贪吃蛇&quot; class=&quot;headerlink&quot; title=&quot;简易贪吃蛇&quot;&gt;&lt;/a&gt;简易贪吃蛇&lt;/h2&gt;&lt;h3 id=&quot;项目分析&quot;&gt;&lt;a href=&quot;#项目分析&quot; class=&quot;headerlink&quot; title=&quot;项目分析&quot;
      
    
    </summary>
    
      <category term="前端" scheme="http://yoursite.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="js" scheme="http://yoursite.com/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>Canvas小鸟游戏</title>
    <link href="http://yoursite.com/2017/02/08/%E7%AC%A8%E7%AC%A8%E7%9A%84%E5%B0%8F%E9%B8%9F/"/>
    <id>http://yoursite.com/2017/02/08/笨笨的小鸟/</id>
    <published>2017-02-08T13:54:05.000Z</published>
    <updated>2018-03-06T13:54:52.127Z</updated>
    
    <content type="html"><![CDATA[<h2 id="FlapyBird游戏实现"><a href="#FlapyBird游戏实现" class="headerlink" title="FlapyBird游戏实现"></a>FlapyBird游戏实现</h2><h3 id="项目需要分析"><a href="#项目需要分析" class="headerlink" title="项目需要分析"></a>项目需要分析</h3><ol><li>天空背景是连续水平滚动的</li><li>地面背景是连续水平滚动的</li><li>管道背景是连续水平滚动的，管道的高度随机，管道充当小鸟飞行的障碍物</li><li>小鸟总是在做自由落体运动，点击会给他一个向上的速度，小鸟飞行中在扇动翅膀，小鸟上飞和下落时仰角会发生变化</li><li>小鸟掉到地上，或者撞到柱子上，则游戏结束</li><li>需要在右上角显示游戏持续的时间</li></ol><h3 id="项目实现分析"><a href="#项目实现分析" class="headerlink" title="项目实现分析"></a>项目实现分析</h3><ul><li><blockquote><p>原理： 动画效果，其实就像是连环画， 每一帧，就相当于一张连环画。当播放连环画的速度极快，超过每秒24张每秒时，人的肉眼就会认会它是连续的动画效果。所有的视频播放原理都是这样的。</p></blockquote></li></ul><ol><li><p>愤怒的小鸟这个demo中，每一帧，就相当于连环画的单张画面，每一张画面上，拥有的元素都是一样的，比如小鸟、天空、地面、管道。</p></li><li><p>但是在每一张连环画上， 元素的位置不一样，当前帧的元素的状态和位置，在是上一帧的元素的状态和位置基础上重新计算的</p></li><li><p>我们可以先把画一张连环画的效果实现，现用一个系统动画，画面就会动起来了，每次执行动画时，就相当于是先把画布清空，画一张新的画面上去</p></li></ol><h3 id="确定开发步骤"><a href="#确定开发步骤" class="headerlink" title="确定开发步骤"></a>确定开发步骤</h3><ol><li>创建绘图模板</li><li>加载图片元素</li><li>天空背景实现</li><li>陆地背景实现</li><li>管道实现</li><li>小鸟实现</li><li>实现碰撞判断</li><li>时间统计实现</li></ol><h3 id="创建绘图模板"><a href="#创建绘图模板" class="headerlink" title="创建绘图模板"></a>创建绘图模板</h3><ol><li><p>代码很简单</p> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    #canvas &#123;</span></span><br><span class="line"><span class="undefined">        border: 1px solid #000;</span></span><br><span class="line"><span class="undefined">    &#125; </span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">width</span>=<span class="string">"800"</span> <span class="attr">height</span>=<span class="string">"600"</span> <span class="attr">id</span>=<span class="string">"canvas"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    var canvas = document.getElementById("canvas");</span></span><br><span class="line"><span class="undefined">    var ctx = canvas.getContext("2d");</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="加载图片元素"><a href="#加载图片元素" class="headerlink" title="加载图片元素"></a>加载图片元素</h3><ol><li><p>先用图片名，加载图片，并生成图片对象。所有的资源图片加载成功之后，才能运行游戏</p></li><li><p>代码</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadImage</span>(<span class="params">imgNameList, callBack</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//所有图片对象</span></span><br><span class="line">    <span class="keyword">var</span> imageArr = &#123;&#125;;</span><br><span class="line">    <span class="comment">//计数，每加载完一张图片后，计数加1</span></span><br><span class="line">    <span class="keyword">var</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//使用for循环加载所有图片</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; imgNameList.length; i++) &#123;</span><br><span class="line">        <span class="comment">//创建一张图片，并保存到图片数组对象中</span></span><br><span class="line">        <span class="keyword">var</span> image = <span class="keyword">new</span> Image();</span><br><span class="line">        image.src = <span class="string">"imgs/"</span> + imgNameList[i] + <span class="string">".png"</span>;</span><br><span class="line">        imageArr[imgNameList[i]] = image;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//当计数和imgNameList的长度一致时，代表所有图片都加载完成了</span></span><br><span class="line">        image.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            count++;</span><br><span class="line">            <span class="keyword">if</span> (count == imgNameList.length) &#123;</span><br><span class="line">                <span class="comment">//完成回调（加载完图片之后，要做的事情）</span></span><br><span class="line">                callBack(imageArr);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="天空背景实现"><a href="#天空背景实现" class="headerlink" title="天空背景实现"></a>天空背景实现</h3><ul><li><p>天空，把两张天空拼在一起，不断修改这两张天空在画布的位置；当左边的天空滚出画布时，拼到第二张画布的后面重新画</p></li><li><p>代码</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Sky</span> (<span class="params">drawInfo</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.ctx = drawInfo.ctx;</span><br><span class="line">    <span class="keyword">this</span>.image = drawInfo.image;</span><br><span class="line">    <span class="keyword">this</span>.x = drawInfo.x;</span><br><span class="line">    <span class="keyword">this</span>.speed = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Sky.prototype = &#123;</span><br><span class="line">    <span class="keyword">constructor</span>: Sky,</span><br><span class="line">    draw: function () &#123;</span><br><span class="line">        <span class="comment">//绘制天空</span></span><br><span class="line">        <span class="keyword">this</span>.ctx.drawImage(<span class="keyword">this</span>.image, <span class="keyword">this</span>.x, <span class="number">0</span>, <span class="keyword">this</span>.image.width, <span class="keyword">this</span>.image.height);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//移动坐标</span></span><br><span class="line">        <span class="keyword">this</span>.x -= <span class="keyword">this</span>.speed;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.x &lt; - <span class="keyword">this</span>.image.width) &#123;</span><br><span class="line">            <span class="keyword">this</span>.x += <span class="number">2</span> * <span class="keyword">this</span>.image.width;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="陆地背景实现"><a href="#陆地背景实现" class="headerlink" title="陆地背景实现"></a>陆地背景实现</h3><ul><li>地面，和天空的原理是一样的，不同的是四张地面拼在一起</li><li>代码  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Land</span> (<span class="params">drawInfo</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.ctx = drawInfo.ctx;</span><br><span class="line">    <span class="keyword">this</span>.image = drawInfo.image;</span><br><span class="line">    <span class="keyword">this</span>.x = drawInfo.x;</span><br><span class="line">    <span class="keyword">this</span>.y = drawInfo.y;</span><br><span class="line">    <span class="keyword">this</span>.speed = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Land.prototype = &#123;</span><br><span class="line">    <span class="keyword">constructor</span>: Land,</span><br><span class="line">    draw: function () &#123;</span><br><span class="line">        <span class="comment">//绘制天空</span></span><br><span class="line">        <span class="keyword">this</span>.ctx.drawImage(<span class="keyword">this</span>.image, <span class="keyword">this</span>.x, <span class="keyword">this</span>.y, <span class="keyword">this</span>.image.width, <span class="keyword">this</span>.image.height);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//移动坐标</span></span><br><span class="line">        <span class="keyword">this</span>.x -= <span class="keyword">this</span>.speed;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.x &lt; - <span class="keyword">this</span>.image.width) &#123;</span><br><span class="line">            <span class="keyword">this</span>.x += <span class="number">4</span> * <span class="keyword">this</span>.image.width;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="管道实现"><a href="#管道实现" class="headerlink" title="管道实现"></a>管道实现</h3><ul><li><p>管道，管道是六组拼在一起，不断调整它们的位置，需要注意的是　我们同时还要计算管道的垂直方向的位置，因为管道的高度是随机的</p></li><li><p>代码</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Pipe</span> (<span class="params">drawInfo</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.ctx = drawInfo.ctx;</span><br><span class="line">    <span class="keyword">this</span>.topImage = drawInfo.topImage;</span><br><span class="line">    <span class="keyword">this</span>.bottomImage = drawInfo.bottomImage;</span><br><span class="line">    <span class="keyword">this</span>.x = drawInfo.x;</span><br><span class="line">    <span class="keyword">this</span>.bottom = drawInfo.bottom;</span><br><span class="line">    <span class="keyword">this</span>.space = drawInfo.space;</span><br><span class="line">    <span class="keyword">this</span>.gap = drawInfo.gap;</span><br><span class="line">    <span class="keyword">this</span>.speed = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">this</span>.canvasWidth = drawInfo.canvasWidth;</span><br><span class="line">    <span class="keyword">this</span>.canvasHeight = drawInfo.canvasHeight;</span><br><span class="line">    <span class="keyword">this</span>.topPipeHeight = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">this</span>.bottomPipeHeight = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//先计算高度</span></span><br><span class="line">    <span class="keyword">this</span>.initHeight()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Pipe.prototype = &#123;</span><br><span class="line">    <span class="keyword">constructor</span>: Pipe,</span><br><span class="line">    draw: function () &#123;</span><br><span class="line">        <span class="comment">//画上面的管道</span></span><br><span class="line">        <span class="keyword">this</span>.ctx.drawImage(<span class="keyword">this</span>.topImage, <span class="keyword">this</span>.x, <span class="number">0</span>, <span class="keyword">this</span>.topImage.width, <span class="keyword">this</span>.topPipeHeight);</span><br><span class="line">        <span class="comment">//画下面的管道</span></span><br><span class="line">        <span class="keyword">this</span>.ctx.drawImage(<span class="keyword">this</span>.bottomImage, <span class="keyword">this</span>.x, <span class="keyword">this</span>.topPipeHeight + <span class="keyword">this</span>.space, <span class="keyword">this</span>.topImage.width, <span class="keyword">this</span>.bottomPipeHeight);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//画两个方形</span></span><br><span class="line">        ctx.rect(<span class="keyword">this</span>.x, <span class="number">0</span>, <span class="keyword">this</span>.topImage.width, <span class="keyword">this</span>.topPipeHeight);</span><br><span class="line">        ctx.rect(<span class="keyword">this</span>.x, <span class="keyword">this</span>.topPipeHeight + <span class="keyword">this</span>.space, <span class="keyword">this</span>.topImage.width, <span class="keyword">this</span>.bottomPipeHeight);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//移动坐标</span></span><br><span class="line">        <span class="keyword">this</span>.x -= <span class="keyword">this</span>.speed;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.x &lt; - <span class="keyword">this</span>.topImage.width) &#123;</span><br><span class="line">            <span class="keyword">this</span>.x = <span class="keyword">this</span>.canvasWidth - <span class="keyword">this</span>.topImage.width + <span class="keyword">this</span>.gap;</span><br><span class="line">            <span class="keyword">this</span>.initHeight();</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.topPipeHeight);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    initHeight: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//随机计算高度</span></span><br><span class="line">        <span class="keyword">this</span>.topPipeHeight = <span class="built_in">Math</span>.random() * <span class="number">200</span> + <span class="number">100</span>;</span><br><span class="line">        <span class="keyword">this</span>.bottomPipeHeight = <span class="keyword">this</span>.canvasHeight-<span class="keyword">this</span>.topPipeHeight-<span class="keyword">this</span>.space-<span class="keyword">this</span>.bottom;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="小鸟实现"><a href="#小鸟实现" class="headerlink" title="小鸟实现"></a>小鸟实现</h3><ul><li><p>小鸟（三种状态）， 翅膀在下面，翅膀在中间，翅膀在下面，执行第一次动画时，用翅膀在上面的图片，插放第二张时，用翅膀在中间的图片; 播放第三张图片时，用翅膀在下面的图片，如果循环，小乌就动起来了</p></li><li><p>代码</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Bird</span> (<span class="params">drawInfo</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.ctx = drawInfo.ctx;</span><br><span class="line">    <span class="keyword">this</span>.image = drawInfo.image;</span><br><span class="line">    <span class="keyword">this</span>.width = <span class="keyword">this</span>.image.width/<span class="number">3</span>;</span><br><span class="line">    <span class="keyword">this</span>.height = <span class="keyword">this</span>.image.height;</span><br><span class="line">    <span class="keyword">this</span>.x = drawInfo.x;</span><br><span class="line">    <span class="keyword">this</span>.y = drawInfo.y;</span><br><span class="line">    <span class="keyword">this</span>.index = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">this</span>.speed = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">this</span>.aspeed = <span class="number">0.0004</span>;</span><br><span class="line">    <span class="keyword">this</span>.maxSpeed = <span class="number">0.3</span>;</span><br><span class="line">    <span class="keyword">this</span>.masAngle = <span class="number">45</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Bird.prototype = &#123;</span><br><span class="line">    <span class="keyword">constructor</span>: Bird,</span><br><span class="line">    draw: function (deltaTime) &#123;</span><br><span class="line">        <span class="comment">//计算小鸟当前的位置</span></span><br><span class="line">        <span class="comment">//改变后的速度</span></span><br><span class="line">        <span class="keyword">this</span>.speed = <span class="keyword">this</span>.speed + <span class="keyword">this</span>.aspeed * deltaTime;</span><br><span class="line">        <span class="comment">//改变后的位移位置</span></span><br><span class="line">        <span class="keyword">this</span>.y += <span class="keyword">this</span>.speed * deltaTime + <span class="keyword">this</span>.aspeed*deltaTime*deltaTime/<span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//保存状态</span></span><br><span class="line">        ctx.save()</span><br><span class="line">        <span class="comment">//小鸟要以自己为中心旋转，所以要把参照原点改成自己</span></span><br><span class="line">        ctx.translate(<span class="keyword">this</span>.x + <span class="keyword">this</span>.width/<span class="number">2</span>, <span class="keyword">this</span>.y + <span class="keyword">this</span>.height/<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">//公式：当前速度/最大速度 = 当前角度/最大角度</span></span><br><span class="line">        <span class="keyword">var</span> currenAngle = <span class="keyword">this</span>.masAngle * <span class="keyword">this</span>.speed / <span class="keyword">this</span>.maxSpeed;</span><br><span class="line">        ctx.rotate(<span class="keyword">this</span>.angleToRadian(currenAngle));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//绘制小鸟（9参模型，中间四个，图片的切片位置和大小，后面四个，图片的绘制位置和大小）</span></span><br><span class="line">        <span class="keyword">this</span>.index += <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">this</span>.ctx.drawImage(<span class="keyword">this</span>.image,</span><br><span class="line">            <span class="keyword">this</span>.width*(<span class="keyword">this</span>.index%<span class="number">3</span>), <span class="number">0</span>, <span class="keyword">this</span>.width, <span class="keyword">this</span>.height,</span><br><span class="line">            -<span class="keyword">this</span>.width/<span class="number">2</span>, -<span class="keyword">this</span>.height/<span class="number">2</span>, <span class="keyword">this</span>.width, <span class="keyword">this</span>.height</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        ctx.restore();</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    angleToRadian: <span class="function"><span class="keyword">function</span> (<span class="params">angle</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> angle / <span class="number">180</span> * <span class="built_in">Math</span>.PI;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="实现碰撞判断"><a href="#实现碰撞判断" class="headerlink" title="实现碰撞判断"></a>实现碰撞判断</h3><ol><li><p>碰撞判断的原理：就是判断小鸟的坐标是否超出了画布的边缘，或者是否在管道的路径之内</p></li><li><p>判断是否超出了画布的边缘</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//小鸟超出了画布了</span></span><br><span class="line"><span class="keyword">if</span>(ctx.isPointInPath(bird.x + bird.width / <span class="number">2</span>, bird.y + bird.height /<span class="number">2</span>))&#123;</span><br><span class="line">    isDie = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>判断是否在管道的路径之内</p><ol><li><p>先把管道的路径绘制出来(pipe.js)</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//画两个方形</span></span><br><span class="line">    ctx.rect(<span class="keyword">this</span>.x, <span class="number">0</span>, <span class="keyword">this</span>.topImage.width, <span class="keyword">this</span>.topPipeHeight);</span><br><span class="line">    ctx.rect(<span class="keyword">this</span>.x, <span class="keyword">this</span>.topPipeHeight + <span class="keyword">this</span>.space, <span class="keyword">this</span>.topImage.width, <span class="keyword">this</span>.bottomPipeHeight);</span><br></pre></td></tr></table></figure></li><li><p>判断（flapyBird.html）</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(ctx.isPointInPath(bird.x + bird.width / <span class="number">2</span>, bird.y + bird.height /<span class="number">2</span>))&#123;</span><br><span class="line">                isDie = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure></li></ol></li></ol><h3 id="时间统计实现"><a href="#时间统计实现" class="headerlink" title="时间统计实现"></a>时间统计实现</h3><ol><li><p>获得累时间,用一下变量记录每播放一帧动画的时间(currentTime)，减去上次播放动画的时间(oldTime)，即为此帧与上一帧之间的时间差(deltaTime)；计算完时间差后，当前帧时间相对于下一帧，就变成了上一帧的时间（oldTime）</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//计算时间</span></span><br><span class="line">currentTime = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="keyword">var</span> deltaTime = currentTime - lastTime;</span><br><span class="line">lastTime = currentTime;</span><br></pre></td></tr></table></figure></li><li><p>计算时分秒、位置、并且开始执行绘制操作</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//计算时分秒</span></span><br><span class="line">totalTime += deltaTime;</span><br><span class="line"><span class="keyword">var</span> seconds = <span class="built_in">Math</span>.floor(totalTime/<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> hour = <span class="built_in">Math</span>.floor(seconds/<span class="number">3600</span>);</span><br><span class="line"><span class="keyword">var</span> minute = <span class="built_in">Math</span>.floor(seconds%<span class="number">3600</span>/<span class="number">60</span>);</span><br><span class="line"><span class="keyword">var</span> second = <span class="built_in">Math</span>.floor(seconds%<span class="number">60</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取文字及长度</span></span><br><span class="line"><span class="keyword">var</span> text = <span class="string">"您坚持了"</span>+hour+<span class="string">"小时"</span>+minute+<span class="string">"分"</span>+second+<span class="string">"秒"</span></span><br><span class="line"><span class="keyword">var</span> textwh = ctx.measureText(text);</span><br><span class="line"><span class="comment">//文字绘制</span></span><br><span class="line">ctx.fillText(text, canvas.width - textwh.width - <span class="number">20</span>, <span class="number">20</span>);</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;FlapyBird游戏实现&quot;&gt;&lt;a href=&quot;#FlapyBird游戏实现&quot; class=&quot;headerlink&quot; title=&quot;FlapyBird游戏实现&quot;&gt;&lt;/a&gt;FlapyBird游戏实现&lt;/h2&gt;&lt;h3 id=&quot;项目需要分析&quot;&gt;&lt;a href=&quot;#项目需
      
    
    </summary>
    
      <category term="前端" scheme="http://yoursite.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="canvas" scheme="http://yoursite.com/tags/canvas/"/>
    
  </entry>
  
  <entry>
    <title>css高清背景图</title>
    <link href="http://yoursite.com/2016/07/18/css%E9%AB%98%E6%B8%85%E5%9B%BE/"/>
    <id>http://yoursite.com/2016/07/18/css高清图/</id>
    <published>2016-07-18T09:07:05.000Z</published>
    <updated>2018-03-08T07:39:43.607Z</updated>
    
    <content type="html"><![CDATA[<h2 id="CSS高清背景图"><a href="#CSS高清背景图" class="headerlink" title="CSS高清背景图"></a>CSS高清背景图</h2><h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><ol><li>现在的手机普遍使用的都是高清图，也就意味着屏幕有两个宽度<ol><li>css的像素的宽度： 在开发过程中，布局直接使用的宽度</li><li>手机硬件的分辨率的宽度，一般情况下和CSS的宽度是一致的，但是近几年，都流行高清屏，硬件的宽度一般是css宽度的2倍或3倍，这个时候就需要使用高清图片</li><li>在前端开发的时候，一般使用一个2倍图就可以了</li></ol></li></ol><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><ol><li>假如我们使用的就是一个小图标： 那么只需要把 background-size 设为图片本身的一半，就可以了<br> ´background: url(“./images/im_2x.png”) no-repeat 0px 0px /57px 21px;</li><li>如果使用的是精灵图： 那么要做的事情<ol><li>把background-position:x y; 设为它本来在精灵的位置的一半。</li><li>把background-size 也设为图片本身宽度的一半。</li></ol></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;CSS高清背景图&quot;&gt;&lt;a href=&quot;#CSS高清背景图&quot; class=&quot;headerlink&quot; title=&quot;CSS高清背景图&quot;&gt;&lt;/a&gt;CSS高清背景图&lt;/h2&gt;&lt;h3 id=&quot;说明&quot;&gt;&lt;a href=&quot;#说明&quot; class=&quot;headerlink&quot; titl
      
    
    </summary>
    
      <category term="前端" scheme="http://yoursite.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="css" scheme="http://yoursite.com/tags/css/"/>
    
  </entry>
  
</feed>
